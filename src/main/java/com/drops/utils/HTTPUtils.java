package com.drops.utils;

import cn.hutool.http.HttpRequest;
import com.drops.ui.MainController;
import sun.applet.Main;

import java.net.Proxy;

/**
 * @ClassName: HTTPUtils
 * @Description: TODO
 * @Author: Summer
 * @Date: 2021/7/28 9:39
 * @Version: v1.0.0
 * @Description:
 **/
public class HTTPUtils {
    private static final int Timeout = 5000;
    private static final String DefalutEncoding = "UTF-8";
    private String method = "get";

    /**
     * @Description: 对Spring Boot 版本的Get请求处理
     * @param target 目标
     *
     * @return:
     */
    public void getRequest(String target){
        String url = URLUtil.normalizeURL(target);
        String result = HttpRequest.get(url).execute().body();


    }
    /**
     * @Description: 对Spring Boot 版本的Get请求处理并设置代理
     * @param target 目标
     *
     * @return:
     */
    public void getRequestProxy(String target){
        Proxy proxy = (Proxy) MainController.currentProxy.get("proxy");
        String url = URLUtil.normalizeURL(target);
        String result = HttpRequest.get(target)
                .setProxy(proxy).execute().body();
    }

    /**
     * @Description: 对Spring Boot V1 版本的Post请求处理
     * @param target 目标
     * @param Point 端点
     *
     * @return:
     */
    public void postRequestV1(String target, String Point){
        String url = URLUtil.normalizeURL(target) + Point;

        String result = HttpRequest.post(url)
                .header("Content-Type","application/x-www-form-urlencoded")
                .execute().body();
    }

    public void postRequestV1Proxy(String target, String Point){
        String url = URLUtil.normalizeURL(target) + Point;
        Proxy proxy = (Proxy) MainController.currentProxy.get("proxy");
        String result = HttpRequest.post(url)
                .header("Content-Type","application/x-www-form-urlencoded")
                .setProxy(proxy).execute().body();


    }

    /**
     * @Description: 对Spring Boot V2 版本的Post请求处理
     * @param target 目标
     * @param Point 端点
     *
     * @return:
     */
    public void postRequestV2(String target, String Point){
        String url = URLUtil.normalizeURL(target) + Point;

        String result = HttpRequest.post(url)
                .header("Content-Type","application/json")
                .execute().body();

    }

    public void postRequestV2Proxy(String target, String Point){
        String url = URLUtil.normalizeURL(target) + Point;
        Proxy proxy = (Proxy) MainController.currentProxy.get("proxy");

        String result = HttpRequest.post(url)
                .header("Content-Type","application/json")
                .setProxy(proxy).execute().body();
    }











}
